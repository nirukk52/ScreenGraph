version: '3'

# Shared utilities used by all commands
# Preflight checks, environment validation, worktree detection

tasks:
  preflight:
    desc: "Run all preflight checks (ports, environment)"
    cmds:
      - echo "ğŸ” Running preflight checks..."
      - ./preflight.sh
    silent: false

  check-worktree:
    desc: "Verify worktree isolation and port assignments"
    cmds:
      - echo "ğŸ“ Checking worktree isolation..."
      - node ../../../automation/scripts/worktree-detection.mjs validate
    silent: false

  check-worktree-strict:
    desc: "Verify worktree isolation (fails on main tree)"
    cmds:
      - echo "ğŸ“ Checking worktree isolation (strict mode)..."
      - node ../../../automation/scripts/worktree-detection.mjs validate --strict
    silent: false

  load-env:
    desc: "Load and display environment variables"
    cmds:
      - node ../../../automation/scripts/env.mjs print
    silent: false

  status:
    desc: "Show environment status (ports, services)"
    cmds:
      - node ../../../automation/scripts/env.mjs status
    silent: false

  validate-commit-message:
    desc: "Validate commit message format (conventional commits)"
    cmds:
      - echo "ğŸ“ Validating commit message..."
      - echo "âš ï¸  Commit message validator not yet implemented"
      - echo "   This will check for type(scope) message format"
    silent: false

