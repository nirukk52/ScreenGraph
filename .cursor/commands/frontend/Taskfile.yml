version: '3'

# Frontend commands
# Frontend-specific development tasks

vars:
  FRONTEND_PORT:
    sh: node ../../../automation/scripts/env.mjs frontend-port

tasks:
  dev:
    desc: "Start frontend development server"
    cmds:
      - echo "âš›ï¸  Starting frontend on port {{.FRONTEND_PORT}}..."
      - cd ../../frontend && bunx --bun vite dev --port {{.FRONTEND_PORT}}
    silent: false

  build:
    desc: "Build frontend for production"
    cmds:
      - echo "ğŸ“¦ Building frontend..."
      - cd ../../frontend && bun run build
      - echo "âœ… Build complete"
    silent: false

  typecheck:
    desc: "Run TypeScript type checking"
    cmds:
      - echo "ğŸ” Type checking..."
      - cd ../../frontend && bun run check
    silent: false

  lint:
    desc: "Run linter"
    cmds:
      - echo "ğŸ” Linting..."
      - cd ../../frontend && bun run lint
    silent: false

  gen:
    desc: "Regenerate Encore client"
    cmds:
      - echo "ğŸ”„ Regenerating Encore client..."
      - cd ../../frontend && bun run gen
      - echo "âœ… Client regenerated"
    silent: false

  test:
    desc: "Run frontend tests"
    cmds:
      - echo "ğŸ§ª Running frontend tests..."
      - cd ../../frontend && bun test
    silent: false

  logs:
    desc: "View frontend logs"
    cmds:
      - tail -f ../../frontend.log
    silent: false
