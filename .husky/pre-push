#!/bin/sh
# Husky pre-push hook
# 1. Cleanup root documentation (vibe_manager_vibe responsibility)
# 2. Run smoke tests
# 3. Run E2E tests

echo "ğŸ§¹ Vibe Manager: Cleaning up root documentation..."
echo ""

# Clean up temporary/analysis docs from root
node automation/scripts/cleanup-root-docs.mjs || echo "âš ï¸  Cleanup had warnings (non-blocking)"

echo ""
echo "ğŸ§ª Running smoke tests before push (bun run qa:smoke)..."
echo ""

# Single entry point ensures Turborepo + Taskfile stay in sync
bun run qa:smoke || exit 1

echo ""
echo "ğŸ­ Running E2E tests before push (bun run test:e2e:ci)..."
echo ""

# Run E2E tests in headless CI mode
bun run test:e2e:ci || exit 1

echo ""
echo "âœ… All checks passed - proceeding with push"

