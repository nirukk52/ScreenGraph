var x=Object.defineProperty;var m=t=>{throw TypeError(t)};var D=(t,e,s)=>e in t?x(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var k=(t,e,s)=>D(t,typeof e!="symbol"?e+"":e,s),g=(t,e,s)=>e.has(t)||m("Cannot "+s);var a=(t,e,s)=>(g(t,e,"read from private field"),s?s.call(t):e.get(t)),_=(t,e,s)=>e.has(t)?m("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),y=(t,e,s,r)=>(g(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s);import{j as A,k as M,l as E,p as R,o as T,q as w,v as b,w as B,x as C,y as N,z as S,A as H,E as j,B as q,H as z,C as I,D as L,F}from"./BvAXCPpv.js";var l,d,n,p,v;class O{constructor(e,s=!0){k(this,"anchor");_(this,l,new Map);_(this,d,new Map);_(this,n,new Map);_(this,p,!0);_(this,v,()=>{var e=A;if(a(this,l).has(e)){var s=a(this,l).get(e),r=a(this,d).get(s);if(r)M(r);else{var o=a(this,n).get(s);o&&(a(this,d).set(s,o.effect),a(this,n).delete(s),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[c,i]of a(this,l)){if(a(this,l).delete(c),c===e)break;const f=a(this,n).get(i);f&&(E(f.effect),a(this,n).delete(i))}for(const[c,i]of a(this,d)){if(c===s)continue;const f=()=>{if(Array.from(a(this,l).values()).includes(c)){var u=document.createDocumentFragment();C(i,u),u.append(T()),a(this,n).set(c,{effect:i,fragment:u})}else E(i);a(this,d).delete(c)};a(this,p)||!r?R(i,f,!1):f()}}});this.anchor=e,y(this,p,s)}ensure(e,s){var r=A,o=N();if(s&&!a(this,d).has(e)&&!a(this,n).has(e))if(o){var c=document.createDocumentFragment(),i=T();c.append(i),a(this,n).set(e,{effect:w(()=>s(i)),fragment:c})}else a(this,d).set(e,w(()=>s(this.anchor)));if(a(this,l).set(r,e),o){for(const[f,h]of a(this,d))f===e?r.skipped_effects.delete(h):r.skipped_effects.add(h);for(const[f,h]of a(this,n))f===e?r.skipped_effects.delete(h.effect):r.skipped_effects.add(h.effect);r.add_callback(a(this,v))}else b&&(this.anchor=B),a(this,v).call(this)}}l=new WeakMap,d=new WeakMap,n=new WeakMap,p=new WeakMap,v=new WeakMap;function G(t,e,s=!1){b&&H();var r=new O(t),o=s?j:0;function c(i,f){if(b){const u=q(t)===z;if(i===u){var h=I();L(h),r.anchor=h,F(!1),r.ensure(i,f),F(!0);return}}r.ensure(i,f)}S(()=>{var i=!1;e((f,h=!0)=>{i=!0,c(h,f)}),i||c(!1,null)},o)}export{O as B,G as i};
