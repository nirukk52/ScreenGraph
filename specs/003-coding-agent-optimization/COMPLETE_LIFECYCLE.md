# The Complete Self-Improvement Lifecycle

**How the 4-command system creates a virtuous improvement cycle.**

---

## ğŸ”„ **The 4 Commands**

```
Daily (Per Spec):
  @before-task  [task]      â†’ Use current skills
  @during-task  [subtask]   â†’ Use current skills  
  @after-task   [completed] â†’ Document evidence

Quarterly (Every 10-20 specs):
  @update-skills            â†’ Refine skills based on evidence
```

---

## ğŸ“ˆ **The Complete Cycle**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MONTH 1: USE SKILLS (Specs 1-10)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ Per spec:
                        â”‚
                        v
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  @before-task   â”‚  Uses: Current skills + empty Graphiti
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       v
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  @during-task   â”‚  Uses: Current skills
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       v
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  @after-task    â”‚  Documents: "backend-debugging worked well
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           encore-mcp was helpful
                       â”‚                    Struggled with async issues"
                       â”‚
                       v
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  Graphiti Grows        â”‚
          â”‚  â€¢ 10 specs documented â”‚
          â”‚  â€¢ Patterns emerging   â”‚
          â”‚  â€¢ Gotchas captured    â”‚
          â”‚  â€¢ Skill usage tracked â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ After 10-20 specs...
                       â”‚
                       v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MONTH 3: REFINE SKILLS (Quarterly Review)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        v
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ @update-skills  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                         â”‚
          v                         v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Search Graphiti  â”‚    â”‚ Fetch Context7 Docs  â”‚
â”‚ For Evidence     â”‚    â”‚ For Updates          â”‚
â”‚                  â”‚    â”‚                      â”‚
â”‚ Finds:           â”‚    â”‚ Gets:                â”‚
â”‚ â€¢ backend-debug  â”‚    â”‚ â€¢ Latest Encore docs â”‚
â”‚   used 15Ã—       â”‚    â”‚ â€¢ New Svelte patternsâ”‚
â”‚ â€¢ 12 success     â”‚    â”‚ â€¢ Updated Playwright â”‚
â”‚ â€¢ 3 struggles    â”‚    â”‚   APIs               â”‚
â”‚   (async issues) â”‚    â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      v
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Update SKILL.md Files  â”‚
         â”‚                        â”‚
         â”‚ backend-debugging:     â”‚
         â”‚ + Add async patterns   â”‚
         â”‚ + Update MCP combos    â”‚
         â”‚                        â”‚
         â”‚ frontend-development:  â”‚
         â”‚ + New Svelte 5 runes   â”‚
         â”‚ + Updated best practicesâ”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      v
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Document in Graphiti   â”‚
         â”‚                        â”‚
         â”‚ "Updated skills based  â”‚
         â”‚  on 15 spec evidence"  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MONTH 4: USE BETTER SKILLS (Specs 11-20)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        v
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  @before-task   â”‚  NOW uses: IMPROVED skills + 10-spec Graphiti
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           Better patterns, proven workflows
                       â”‚
                       v
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  @during-task   â”‚  NOW uses: Enhanced guidance
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           More accurate MCP suggestions
                       â”‚
                       v
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  @after-task    â”‚  Documents: Even more patterns
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           Builds on previous learnings
                       â”‚
                       v
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  Graphiti Richer      â”‚
          â”‚  â€¢ 20 specs now       â”‚
          â”‚  â€¢ Deep patterns      â”‚
          â”‚  â€¢ Skill improvements â”‚
          â”‚    validated          â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        [Cycle repeats, gets better each quarter]
```

---

## ğŸ“Š **Evidence-Based Skill Updates**

### What @after-task Captures (Per Spec):

```typescript
add_memory({
  name: "Spec-005: User Authentication",
  episode_body: `
    [Tags: spec, backend, auth]
    
    Skills Used: backend-debugging, backend-development
    MCP Tools: encore-mcp, context7, sequential-thinking
    
    Effectiveness:
    - backend-debugging: HELPFUL (checkpoint logging worked perfectly)
    - encore-mcp: VERY HELPFUL (inspected database state easily)
    - sequential-thinking: HELPFUL (analyzed auth flow systematically)
    
    Struggles:
    - backend-debugging missing: async error handling patterns
    - Needed to reference external docs for JWT validation
    
    Suggested Improvements:
    - Add async debugging section to backend-debugging skill
    - Add JWT/auth patterns to backend-development skill
  `,
  group_id: "screengraph"
})
```

### What @update-skills Finds (After 10 specs):

```
Search Graphiti: "backend-debugging skill"

Finds:
- Used in: Spec-001, Spec-005, Spec-007, Spec-009, Spec-012 (5 times)
- Success rate: 4/5 (80%)
- Common pattern: Checkpoint logging â†’ encore-mcp inspection â†’ sequential-thinking analysis
- Struggles: Async issues (mentioned 3 times), race conditions (mentioned 2 times)
- MCP pairing: encore-mcp + sequential-thinking (100% of uses)

CONCLUSION: 
- Skill is effective (80% success)
- NEEDS: Async debugging section
- CONFIRM: MCP pairing in skill docs
- UPDATE: Add proven checkpoint â†’ inspect â†’ reason pattern
```

### What @update-skills DOES:

```
1. Update backend-debugging_skill/SKILL.md:
   
   Add new section:
   """
   ## Phase 3.5: Async Debugging (NEW)
   
   For timeout or hanging issues involving async code:
   1. Add checkpoint logs BEFORE and AFTER await calls
   2. Use encore-mcp to inspect state at each checkpoint
   3. Use sequential-thinking to analyze async flow
   4. Common pattern: Promise chain breaks silently
   
   Proven MCP combo: encore-mcp + sequential-thinking (5/5 specs)
   """

2. Document update in Graphiti:
   add_memory({
     name: "Skill Update: backend-debugging - Added Async Patterns",
     episode_body: "Based on evidence from Specs 1, 5, 7, 9, 12...",
     group_id: "screengraph"
   })
```

---

## ğŸ¯ **The 4-Command Lifecycle (Complete)**

| Command | When | What It Does | Improves |
|---------|------|--------------|----------|
| **@before-task** | Before starting (1Ã— per spec) | Uses current skills + Graphiti | Context quality â¬†ï¸ |
| **@during-task** | During work (5-10Ã— per spec) | Uses current skills | Alignment â¬†ï¸ |
| **@after-task** | After completion (1Ã— per spec) | Documents evidence | Graphiti â¬†ï¸ |
| **@update-skills** | Quarterly (every 10-20 specs) | Refines skills with evidence | Skills â¬†ï¸ |

---

## ğŸ’¡ **How @after-task Feeds @update-skills**

### Template for @after-task (Include This!):

```typescript
add_memory({
  name: "Spec-XXX: [Name]",
  episode_body: `
    [Tags: spec, domain, type]
    
    **Problem**: ...
    **Solution**: ...
    
    // ğŸ‘‡ THIS SECTION FEEDS @update-skills
    **Skills Used**:
    - [skill-name]: [HELPFUL | PARTIALLY HELPFUL | NOT HELPFUL]
    - [skill-name]: [effectiveness rating]
    
    **MCP Tools Used**:
    - [mcp-name]: [HELPFUL | NOT HELPFUL]
    - Common pairing: [mcp1] + [mcp2] worked well
    
    **Skill Struggles**:
    - [skill-name] missing: [what was missing]
    - [skill-name] unclear: [what was confusing]
    
    **Suggested Skill Improvements**:
    - Add [pattern/section] to [skill-name]
    - Update [workflow] in [skill-name]
    // ğŸ‘† THIS BECOMES UPDATE PRIORITY
    
    **Key Learnings**: ...
    **Gotchas**: ...
    **Files Modified**: ...
  `,
  group_id: "screengraph"
})
```

---

## ğŸ“ˆ **Expected Evolution**

### Month 1 (Specs 1-10):
```
Skills: Base version (as-is)
Graphiti: Growing (10 entries)
Effectiveness: Learning phase

@after-task captures:
- Which skills used
- What worked
- What struggled
```

### Month 3 (After @update-skills):
```
Skills: Enhanced with:
  - Async debugging (from evidence)
  - Proven MCP pairings (from usage)
  - New patterns (from Specs 1-10)

Graphiti: Rich (10+ specs)
Effectiveness: Improved

@before-task now surfaces:
- "Use backend-debugging, it works"
- "Pair with encore-mcp + sequential-thinking"
- "Watch for async gotchas"
```

### Month 6 (Specs 21-40):
```
Skills: Refined again with:
  - Edge case handling
  - Domain-specific patterns
  - Validated workflows

Graphiti: Expert level (40+ specs)
Effectiveness: High

@before-task gives:
- Deep pattern matching
- Proven solution paths
- Comprehensive gotcha list
```

**Skills get BETTER over time because updates are EVIDENCE-BASED.** âœ…

---

## âœ… **Final Answer**

### **Following 3 Commands Per Spec:**

**Automatically improves:**
- âœ… Graphiti knowledge base (every @after-task)
- âœ… Context quality (@before-task gets richer results)
- âœ… Usage patterns (you learn what works)

**Creates evidence for:**
- âœ… @update-skills to analyze
- âœ… Data-driven skill improvements
- âœ… Proven workflow updates

**Quarterly @update-skills:**
- âœ… Reads evidence from Graphiti
- âœ… Updates SKILL.md files
- âœ… Validates with Context7 docs
- âœ… Documents improvements

---

## ğŸ”„ **The Virtuous Cycle**

```
Use Skills (3 commands)
    â†“
Document Evidence (@after-task)
    â†“
Accumulate Data (Graphiti)
    â†“
Analyze Evidence (@update-skills, quarterly)
    â†“
Update Skills (SKILL.md changes)
    â†“
Use Better Skills (next specs)
    â†“
[Repeat - gets better each cycle]
```

**Automatic data collection + Manual evidence-based refinement = Continuous improvement** âœ…

---

## ğŸ“‹ **Updated Workflow**

```
Daily:
  @before-task â†’ @during-task â†’ @after-task

After 10 specs:
  @update-skills (analyze evidence, update skills)

After 20 specs:
  @update-skills (refine based on more evidence)

After 40 specs:
  @update-skills (expert-level refinement)
```

**The 3 commands FEED the 4th command. Complete self-improvement loop.** ğŸ”„

---

**You already had the pieces! Just needed to connect @after-task evidence to @update-skills analysis.** âœ…
